<!--
     This configuration file is required if iisnode is used to run node processes behind
     IIS or IIS Express.  For more information, visit:

     https://github.com/tjanczuk/iisnode/blob/master/src/samples/configuration/web.config

	 There are one section of redirect rules for QA and one for PRODUCTION.
	 Both of these sections needs to coexist, in this same web.config, until there is a separate
	 deploy pipe for QA. As for now (2018-02-01), as stated by Robin Ljungqvist at Sogeti, the QA
	 environment is integrated in the deploy flow.
-->

<configuration>
    <system.webServer>

        <handlers>
            <!-- indicates that the app.js file is a node.js application to be handled by the iisnode module -->
            <add name="iisnode" path="lib/app.js" verb="*" modules="iisnode" />
        </handlers>

        <!-- You can control how Node is hosted within IIS using the following options -->
        <!--<iisnode
              node_env="%node_env%"
              nodeProcessCommandLine="&quot;%programfiles%\nodejs\node.exe&quot;"
              nodeProcessCountPerApplication="1"
              maxConcurrentRequestsPerProcess="1024"
              maxNamedPipeConnectionRetry="3"
              namedPipeConnectionRetryDelay="2000"
              maxNamedPipeConnectionPoolSize="512"
              maxNamedPipePooledConnectionAge="30000"
              asyncCompletionThreadCount="0"
              initialRequestBufferSize="4096"
              maxRequestBufferSize="65536"
              watchedFiles="*.js"
              uncFileChangesPollingInterval="5000"
              gracefulShutdownTimeout="60000"
              loggingEnabled="true"
              logDirectoryNameSuffix="logs"
              debuggingEnabled="true"
              debuggerPortRange="5058-6058"
              debuggerPathSegment="debug"
              maxLogFileSizeInKB="128"
              appendToExistingLog="false"
              logFileFlushInterval="5000"
              devErrorsEnabled="true"
              flushResponse="false"
              enableXFF="false"
              promoteServerVars=""
             />-->

        <iisnode
                nodeProcessCommandLine="D:\home\bin\node.exe"
                nodeProcessCountPerApplication="0"/>
        <httpErrors existingResponse="PassThrough" />
    </system.webServer>
</configuration>